#include "kernel.h"


// 常见中文字符字库 - 16x16像素
// 每个字符的位图数据（32字节）
static const chinese_glyph_t chinese_font_basic[] = {
    // U+4F60(你)
    {
        0x4F60,
        {0x08, 0x80, 0x08, 0x80, 0x08, 0x80, 0x11, 0xFE, 0x11, 0x02, 0x32, 0x04, 0x34, 0x20, 0x50, 0x20,
         0x91, 0x28, 0x11, 0x24, 0x12, 0x24, 0x12, 0x22, 0x14, 0x22, 0x10, 0x20, 0x10, 0xA0, 0x10, 0x40}},
    // U+597D(好)
    {
        0x597D,
        {0x10, 0x00, 0x10, 0xFC, 0x10, 0x04, 0x10, 0x08, 0xFC, 0x10, 0x24, 0x20, 0x24, 0x20, 0x25, 0xFE,
         0x24, 0x20, 0x48, 0x20, 0x28, 0x20, 0x10, 0x20, 0x28, 0x20, 0x44, 0x20, 0x84, 0xA0, 0x00, 0x40}},
    // U+6B22(欢)
    {
        0x6B22,
        {0x00, 0x80, 0x00, 0x80, 0xFC, 0x80, 0x04, 0xFC, 0x05, 0x04, 0x49, 0x08, 0x2A, 0x40, 0x14, 0x40,
         0x10, 0x40, 0x28, 0xA0, 0x24, 0xA0, 0x45, 0x10, 0x81, 0x10, 0x02, 0x08, 0x04, 0x04, 0x08, 0x02}},
    // U+8FCE(迎)
    {
        0x8FCE,
        {0x00, 0x00, 0x20, 0x80, 0x13, 0x3C, 0x12, 0x24, 0x02, 0x24, 0x02, 0x24, 0xF2, 0x24, 0x12, 0x24,
         0x12, 0x24, 0x12, 0xB4, 0x13, 0x28, 0x12, 0x20, 0x10, 0x20, 0x28, 0x20, 0x47, 0xFE, 0x00, 0x00}},
    // U+4F7F(使)
    {
        0x4F7F,
        {0x10, 0x40, 0x10, 0x40, 0x1F, 0xFE, 0x20, 0x40, 0x20, 0x40, 0x67, 0xFC, 0x64, 0x44, 0xA4, 0x44,
         0x27, 0xFC, 0x20, 0x40, 0x22, 0x40, 0x21, 0x40, 0x20, 0x80, 0x21, 0x40, 0x22, 0x30, 0x2C, 0x0E}},
    // U+7528(用)
    {
        0x7528,
        {0x00, 0x00, 0x3F, 0xF8, 0x21, 0x08, 0x21, 0x08, 0x21, 0x08, 0x3F, 0xF8, 0x21, 0x08, 0x21, 0x08,
         0x21, 0x08, 0x3F, 0xF8, 0x21, 0x08, 0x21, 0x08, 0x21, 0x08, 0x41, 0x08, 0x41, 0x28, 0x80, 0x10}},
    // U+6B63(正)
    {
        0x6B63,
        {0x00, 0x00, 0x7F, 0xFC, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x11, 0x00, 0x11, 0xF8,
         0x11, 0x00, 0x11, 0x00, 0x11, 0x00, 0x11, 0x00, 0x11, 0x00, 0x11, 0x00, 0xFF, 0xFE, 0x00, 0x00}},
    // U+5728(在)
    {
        0x5728,
        {0x02, 0x00, 0x02, 0x00, 0x04, 0x00, 0xFF, 0xFE, 0x08, 0x00, 0x08, 0x40, 0x10, 0x40, 0x30, 0x40,
         0x57, 0xFC, 0x90, 0x40, 0x10, 0x40, 0x10, 0x40, 0x10, 0x40, 0x10, 0x40, 0x1F, 0xFE, 0x10, 0x00}},
    // U+52A0(加)
    {
        0x52A0,
        {0x10, 0x00, 0x10, 0x00, 0x10, 0x00, 0x10, 0x7C, 0xFE, 0x44, 0x12, 0x44, 0x12, 0x44, 0x12, 0x44,
         0x12, 0x44, 0x12, 0x44, 0x12, 0x44, 0x12, 0x44, 0x22, 0x44, 0x22, 0x7C, 0x4A, 0x44, 0x84, 0x00}},
    // U+8F7D(载)
    {
        0x8F7D,
        {0x08, 0x20, 0x08, 0x28, 0x7F, 0x24, 0x08, 0x20, 0xFF, 0xFE, 0x10, 0x20, 0x10, 0x24, 0xFF, 0x24,
         0x20, 0x24, 0x48, 0x28, 0x7F, 0x28, 0x08, 0x10, 0x0F, 0x12, 0xF8, 0x2A, 0x08, 0x46, 0x08, 0x82}},
    // U+4E2D(中)
    {
        0x4E2D,
        {0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x3F, 0xF8, 0x21, 0x08, 0x21, 0x08, 0x21, 0x08,
         0x21, 0x08, 0x21, 0x08, 0x3F, 0xF8, 0x21, 0x08, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00}},
    // U+662F(是)
    {
        0x662F,
        {0x1F, 0xF0, 0x10, 0x10, 0x10, 0x10, 0x1F, 0xF0, 0x10, 0x10, 0x10, 0x10, 0x1F, 0xF0, 0x00, 0x00,
         0xFF, 0xFE, 0x01, 0x00, 0x11, 0x00, 0x11, 0xF8, 0x11, 0x00, 0x29, 0x00, 0x45, 0x00, 0x83, 0xFE}},
    // U+5426(否)
    {
        0x5426,
        {0x00, 0x00, 0x7F, 0xFC, 0x00, 0x80, 0x01, 0x00, 0x03, 0x00, 0x05, 0x60, 0x09, 0x18, 0x31, 0x04,
         0xC1, 0x02, 0x00, 0x00, 0x1F, 0xF0, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x1F, 0xF0, 0x10, 0x10}},
    // U+786E(确)
    {
        0x786E,
        {0x00, 0x40, 0x00, 0x40, 0xFC, 0x7C, 0x10, 0x84, 0x11, 0x08, 0x22, 0xFE, 0x3C, 0x92, 0x64, 0x92,
         0x64, 0xFE, 0xA4, 0x92, 0x24, 0x92, 0x24, 0xFE, 0x3C, 0x92, 0x25, 0x12, 0x21, 0x0A, 0x02, 0x04}},
    // U+5B9A(定)
    {
        0x5B9A,
        {0x02, 0x00, 0x01, 0x00, 0x7F, 0xFE, 0x40, 0x02, 0x80, 0x04, 0x00, 0x00, 0x3F, 0xF8, 0x01, 0x00,
         0x01, 0x00, 0x11, 0x00, 0x11, 0xF8, 0x11, 0x00, 0x11, 0x00, 0x29, 0x00, 0x47, 0xFE, 0x80, 0x00}},
    // U+8BA4(认)
    {
        0x8BA4,
        {0x00, 0x40, 0x20, 0x40, 0x10, 0x40, 0x10, 0x40, 0x00, 0x40, 0x00, 0x40, 0xF0, 0x40, 0x10, 0x40,
         0x10, 0xA0, 0x10, 0xA0, 0x10, 0xA0, 0x15, 0x10, 0x19, 0x10, 0x12, 0x08, 0x04, 0x04, 0x08, 0x02}},
    // U+53D6(取)
    {
        0x53D6,
        {0x00, 0x00, 0xFF, 0x80, 0x22, 0xFC, 0x22, 0x44, 0x3E, 0x44, 0x22, 0x44, 0x22, 0x44, 0x3E, 0x44,
         0x22, 0x28, 0x22, 0x28, 0x27, 0xA8, 0xFA, 0x10, 0x42, 0x10, 0x02, 0x28, 0x02, 0x44, 0x02, 0x82}},
    // U+6D88(消)
    {
        0x6D88,
        {0x00, 0x40, 0x22, 0x48, 0x11, 0x48, 0x11, 0x50, 0x80, 0x40, 0x43, 0xF8, 0x4A, 0x08, 0x0A, 0x08,
         0x13, 0xF8, 0x12, 0x08, 0xE2, 0x08, 0x23, 0xF8, 0x22, 0x08, 0x22, 0x08, 0x22, 0x28, 0x02, 0x10}},
    // U+5417(吗)
    {
        0x5417,
        {0x00, 0x00, 0x03, 0xF0, 0x78, 0x10, 0x48, 0x10, 0x49, 0x10, 0x49, 0x10, 0x49, 0x10, 0x49, 0xFC,
         0x48, 0x04, 0x48, 0x04, 0x78, 0x04, 0x4B, 0xF4, 0x00, 0x04, 0x00, 0x04, 0x00, 0x28, 0x00, 0x10}},
    // U+786C(硬)
    {
        0x786C,
        {0x00, 0x00, 0x01, 0xFE, 0xFC, 0x20, 0x10, 0x20, 0x11, 0xFC, 0x21, 0x24, 0x3D, 0x24, 0x65, 0xFC,
         0x65, 0x24, 0xA5, 0x24, 0x25, 0xFC, 0x25, 0x20, 0x3C, 0xA0, 0x24, 0x40, 0x20, 0xB0, 0x03, 0x0E}},
    // U+76D8(盘)
    {
        0x76D8,
        {0x02, 0x00, 0x04, 0x00, 0x1F, 0xF0, 0x11, 0x10, 0x10, 0x90, 0xFF, 0xFE, 0x10, 0x10, 0x12, 0x10,
         0x21, 0x50, 0x40, 0x20, 0x3F, 0xF8, 0x24, 0x48, 0x24, 0x48, 0x24, 0x48, 0xFF, 0xFE, 0x00, 0x00}},
    // U+6587(文)
    {
        0x6587,
        {0x02, 0x00, 0x01, 0x00, 0x01, 0x00, 0xFF, 0xFE, 0x10, 0x10, 0x10, 0x10, 0x08, 0x20, 0x08, 0x20,
         0x04, 0x40, 0x02, 0x80, 0x01, 0x00, 0x02, 0x80, 0x04, 0x40, 0x08, 0x20, 0x30, 0x18, 0xC0, 0x06}},
    // U+4EF6(件)
    {
        0x4EF6,
        {0x08, 0x20, 0x08, 0x20, 0x09, 0x20, 0x11, 0x20, 0x11, 0xFC, 0x32, 0x20, 0x32, 0x20, 0x54, 0x20,
         0x90, 0x20, 0x17, 0xFE, 0x10, 0x20, 0x10, 0x20, 0x10, 0x20, 0x10, 0x20, 0x10, 0x20, 0x10, 0x20}},
    // U+8D44(资)
    {
        0x8D44,
        {0x01, 0x00, 0x41, 0x00, 0x21, 0xFC, 0x0A, 0x44, 0x14, 0x48, 0xE0, 0xA0, 0x21, 0x10, 0x26, 0x0C,
         0x1F, 0xF0, 0x10, 0x10, 0x11, 0x10, 0x11, 0x10, 0x11, 0x10, 0x02, 0x60, 0x0C, 0x18, 0x70, 0x04}},
    // U+6E90(源)
    {
        0x6E90,
        {0x00, 0x00, 0x27, 0xFE, 0x14, 0x20, 0x14, 0x40, 0x85, 0xFC, 0x45, 0x04, 0x45, 0xFC, 0x15, 0x04,
         0x15, 0xFC, 0x25, 0x24, 0xE4, 0x20, 0x24, 0xA8, 0x29, 0x24, 0x2A, 0x22, 0x30, 0xA0, 0x00, 0x40}},
    // U+7BA1(管)
    {
        0x7BA1,
        {0x20, 0x40, 0x3F, 0x7E, 0x48, 0x90, 0x85, 0x08, 0x01, 0x00, 0x7F, 0xFE, 0x40, 0x02, 0x9F, 0xE4,
         0x10, 0x20, 0x1F, 0xE0, 0x10, 0x00, 0x1F, 0xF0, 0x10, 0x10, 0x10, 0x10, 0x1F, 0xF0, 0x10, 0x10}},
    // U+7406(理)
    {
        0x7406,
        {0x00, 0x00, 0x01, 0xFC, 0xFD, 0x24, 0x11, 0x24, 0x11, 0xFC, 0x11, 0x24, 0x11, 0x24, 0x7D, 0xFC,
         0x10, 0x20, 0x10, 0x20, 0x11, 0xFC, 0x10, 0x20, 0x1C, 0x20, 0xE0, 0x20, 0x43, 0xFE, 0x00, 0x00}},
    // U+5668(器)
    {
        0x5668,
        {0x00, 0x00, 0x3E, 0x7C, 0x22, 0x44, 0x22, 0x44, 0x3E, 0x7C, 0x01, 0x20, 0x01, 0x10, 0xFF, 0xFE,
         0x02, 0x80, 0x0C, 0x60, 0x30, 0x18, 0xC0, 0x06, 0x3E, 0x7C, 0x22, 0x44, 0x22, 0x44, 0x3E, 0x7C}},
    // U+7248(版)
    {
        0x7248,
        {0x04, 0x00, 0x24, 0x0C, 0x24, 0xF0, 0x24, 0x80, 0x3E, 0x80, 0x20, 0xF8, 0x20, 0xA8, 0x3C, 0xA8,
         0x24, 0xA8, 0x24, 0xA8, 0x24, 0x90, 0x24, 0x90, 0x25, 0x28, 0x46, 0x44, 0x00, 0x00, 0x00, 0x00}},
    // U+672C(本)
    {
        0x672C,
        {0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x7F, 0xFC, 0x03, 0x80, 0x05, 0x40, 0x05, 0x40, 0x09, 0x20,
         0x11, 0x10, 0x21, 0x08, 0x4F, 0xE4, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00}},
    // U+4FDD(保)
    {
        0x4FDD,
        {0x08, 0x00, 0x0B, 0xF8, 0x0A, 0x08, 0x12, 0x08, 0x13, 0xF8, 0x30, 0x40, 0x50, 0x40, 0x17, 0xFC,
         0x10, 0xE0, 0x11, 0x50, 0x11, 0x50, 0x12, 0x48, 0x14, 0x44, 0x10, 0x40, 0x00, 0x00, 0x00, 0x00}},
    // U+7559(留)
    {
        0x7559,
        {0x06, 0x00, 0x78, 0xFC, 0x40, 0x44, 0x48, 0x44, 0x54, 0x84, 0x61, 0x18, 0x00, 0x00, 0x3F, 0xF8,
         0x21, 0x08, 0x21, 0x08, 0x3F, 0xF8, 0x21, 0x08, 0x21, 0x08, 0x3F, 0xF8, 0x00, 0x00, 0x00, 0x00}},
    // U+6240(所)
    {
        0x6240,
        {0x06, 0x18, 0x38, 0xE0, 0x20, 0x80, 0x20, 0x80, 0x3E, 0x80, 0x22, 0xFC, 0x22, 0x90, 0x22, 0x90,
         0x3E, 0x90, 0x20, 0x90, 0x20, 0x90, 0x20, 0x90, 0x21, 0x10, 0x42, 0x10, 0x00, 0x00, 0x00, 0x00}},
    // U+6709(有)
    {
        0x6709,
        {0x02, 0x00, 0x02, 0x00, 0x7F, 0xFC, 0x04, 0x00, 0x0F, 0xF0, 0x18, 0x10, 0x28, 0x10, 0x4F, 0xF0,
         0x08, 0x10, 0x08, 0x10, 0x0F, 0xF0, 0x08, 0x10, 0x08, 0x10, 0x08, 0x70, 0x00, 0x00, 0x00, 0x00}},
    // U+6743(权)
    {
        0x6743,
        {0x08, 0x00, 0x09, 0xF8, 0x08, 0x88, 0x7E, 0x88, 0x08, 0x88, 0x18, 0x88, 0x1C, 0x50, 0x2A, 0x50,
         0x2A, 0x50, 0x48, 0x20, 0x08, 0x20, 0x08, 0x50, 0x08, 0x88, 0x09, 0x04, 0x00, 0x00, 0x00, 0x00}},
    // U+5229(利)
    {
        0x5229,
        {0x07, 0x04, 0x3C, 0x04, 0x04, 0x04, 0x04, 0x24, 0x04, 0x24, 0x7F, 0xA4, 0x0C, 0x24, 0x0E, 0x24,
         0x15, 0x24, 0x14, 0xA4, 0x24, 0x04, 0x44, 0x04, 0x04, 0x04, 0x04, 0x1C, 0x00, 0x00, 0x00, 0x00}},
    // U+FF0C(，)
    {
        0xFF0C,
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
         0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x00, 0x30, 0x00, 0x10, 0x00, 0x20, 0x00, 0x00, 0x00}},
    // U+3002(。)
    {
        0x3002,
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
         0x00, 0x00, 0x00, 0x00, 0x18, 0x00, 0x24, 0x00, 0x24, 0x00, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00}},
    // U+FF1F(？)
    {
        0xFF1F,
        {0x00, 0x00, 0x0E, 0x00, 0x11, 0x00, 0x21, 0x80, 0x31, 0x80, 0x31, 0x80, 0x03, 0x00, 0x06, 0x00,
         0x06, 0x00, 0x06, 0x00, 0x06, 0x00, 0x00, 0x00, 0x06, 0x00, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00}},
    // U+FF01(！)
    {
        0xFF01,
        {0x00, 0x00, 0x10, 0x00, 0x10, 0x00, 0x10, 0x00, 0x10, 0x00, 0x10, 0x00, 0x10, 0x00, 0x10, 0x00,
         0x10, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00}},
    // U+3010(【)
    {
        0x3010,
        {0x00, 0x00, 0x01, 0xFC, 0x01, 0xF8, 0x01, 0xF0, 0x01, 0xE0, 0x01, 0xE0, 0x01, 0xC0, 0x01, 0xC0,
         0x01, 0xC0, 0x01, 0xC0, 0x01, 0xE0, 0x01, 0xE0, 0x01, 0xF0, 0x01, 0xF8, 0x01, 0xFC, 0x00, 0x00}},
    // U+3011(】)
    {
        0x3011,
        {0x00, 0x00, 0x3F, 0x80, 0x1F, 0x80, 0x0F, 0x80, 0x07, 0x80, 0x07, 0x80, 0x03, 0x80, 0x03, 0x80,
         0x03, 0x80, 0x03, 0x80, 0x07, 0x80, 0x07, 0x80, 0x0F, 0x80, 0x1F, 0x80, 0x3F, 0x80, 0x00, 0x00}},
    // U+300A(《)
    {
        0x300A,
        {0x00, 0x10, 0x00, 0x24, 0x00, 0x48, 0x00, 0x90, 0x01, 0x20, 0x02, 0x40, 0x04, 0x80, 0x09, 0x00,
         0x04, 0x80, 0x02, 0x40, 0x01, 0x20, 0x00, 0x90, 0x00, 0x48, 0x00, 0x24, 0x00, 0x10, 0x00, 0x00}},
    // U+300B(》)
    {
        0x300B,
        {0x08, 0x00, 0x24, 0x00, 0x12, 0x00, 0x09, 0x00, 0x04, 0x80, 0x02, 0x40, 0x01, 0x20, 0x00, 0x90,
         0x01, 0x20, 0x02, 0x40, 0x04, 0x80, 0x09, 0x00, 0x12, 0x00, 0x24, 0x00, 0x08, 0x00, 0x00, 0x00}},
    // U+00B7(·)
    {
        0x00B7,
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
         0x01, 0x80, 0x01, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}},
    // U+FF1A(：)
    {
        0xFF1A,
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
         0x00, 0x00, 0x30, 0x00, 0x30, 0x00, 0x00, 0x00, 0x30, 0x00, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00}},
    // U+FF08(（)
    {
        0xFF08,
        {0x00, 0x00, 0x00, 0x08, 0x00, 0x10, 0x00, 0x20, 0x00, 0x20, 0x00, 0x40, 0x00, 0x40, 0x00, 0x40,
         0x00, 0x40, 0x00, 0x40, 0x00, 0x40, 0x00, 0x20, 0x00, 0x20, 0x00, 0x10, 0x00, 0x08, 0x00, 0x00}},
    // U+FF09(）)
    {
        0xFF09,
        {0x00, 0x00, 0x20, 0x00, 0x10, 0x00, 0x08, 0x00, 0x08, 0x00, 0x04, 0x00, 0x04, 0x00, 0x04, 0x00,
         0x04, 0x00, 0x04, 0x00, 0x04, 0x00, 0x08, 0x00, 0x08, 0x00, 0x10, 0x00, 0x20, 0x00, 0x00, 0x00}
    }
};

// 16x8 ASCII 字形表 (字符 32..126)
static const uint8_t font16x8_basic[][16] = {
    /* 0x20 ' ' */ {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x21 '!' */ {0x00,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x00,0x00,0x18,0x18,0x00,0x00},
    /* 0x22 '"' */ {0x6C,0x24,0x12,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x23 '#' */ {0x00,0x00,0x00,0x24,0x24,0x24,0x7F,0x12,0x12,0x12,0x7F,0x12,0x12,0x12,0x00,0x00},
    /* 0x24 '$' */ {0x08,0x1C,0x2A,0x49,0x49,0x0A,0x0C,0x18,0x28,0x48,0x49,0x49,0x2A,0x1C,0x08,0x00},
    /* 0x25 '%' */ {0x00,0x46,0x49,0x29,0x29,0x16,0x10,0x08,0x04,0x34,0x4A,0x4A,0x49,0x31,0x00,0x00},
    /* 0x26 '&' */ {0x00,0x0C,0x12,0x12,0x12,0x12,0x0C,0x04,0x2A,0x29,0x11,0x11,0x29,0x46,0x00,0x00},
    /* 0x27 ''' */ {0x0C,0x0C,0x08,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x28 '(' */ {0x20,0x10,0x08,0x08,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x08,0x08,0x10,0x20,0x00},
    /* 0x29 ')' */ {0x02,0x04,0x08,0x08,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x08,0x08,0x04,0x02,0x00},
    /* 0x2A '*' */ {0x00,0x00,0x00,0x08,0x49,0x2A,0x1C,0x08,0x1C,0x2A,0x49,0x08,0x00,0x00,0x00,0x00},
    /* 0x2B '+' */ {0x00,0x00,0x00,0x00,0x08,0x08,0x08,0x7F,0x08,0x08,0x08,0x00,0x00,0x00,0x00,0x00},
    /* 0x2C ',' */ {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0C,0x0C,0x08,0x04,0x00},
    /* 0x2D '-' */ {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x2E '.' */ {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x00,0x00},
    /* 0x2F '/' */ {0x00,0x40,0x40,0x20,0x20,0x10,0x10,0x08,0x04,0x04,0x02,0x02,0x01,0x01,0x00,0x00},
    /* 0x30 '0' */ {0x00,0x0C,0x12,0x21,0x21,0x21,0x21,0x21,0x21,0x21,0x21,0x21,0x12,0x0C,0x00,0x00},
    /* 0x31 '1' */ {0x00,0x08,0x0E,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x00,0x00},
    /* 0x32 '2' */ {0x00,0x0C,0x12,0x21,0x21,0x20,0x10,0x10,0x08,0x04,0x04,0x02,0x01,0x3F,0x00,0x00},
    /* 0x33 '3' */ {0x00,0x0C,0x12,0x21,0x21,0x20,0x10,0x0C,0x10,0x20,0x21,0x21,0x12,0x0C,0x00,0x00},
    /* 0x34 '4' */ {0x00,0x10,0x10,0x18,0x18,0x14,0x14,0x12,0x12,0x11,0x3F,0x10,0x10,0x10,0x00,0x00},
    /* 0x35 '5' */ {0x00,0x3F,0x01,0x01,0x01,0x0D,0x13,0x21,0x20,0x20,0x20,0x21,0x12,0x0C,0x00,0x00},
    /* 0x36 '6' */ {0x00,0x0C,0x12,0x21,0x21,0x01,0x0D,0x13,0x21,0x21,0x21,0x21,0x12,0x0C,0x00,0x00},
    /* 0x37 '7' */ {0x00,0x3F,0x20,0x20,0x10,0x10,0x10,0x08,0x08,0x08,0x04,0x04,0x04,0x04,0x00,0x00},
    /* 0x38 '8' */ {0x00,0x0C,0x12,0x21,0x21,0x21,0x12,0x0C,0x12,0x21,0x21,0x21,0x12,0x0C,0x00,0x00},
    /* 0x39 '9' */ {0x00,0x0C,0x12,0x21,0x21,0x21,0x21,0x32,0x2C,0x20,0x21,0x21,0x12,0x0C,0x00,0x00},
    /* 0x3A ':' */ {0x00,0x00,0x00,0x00,0x00,0x0C,0x0C,0x00,0x00,0x00,0x00,0x0C,0x0C,0x00,0x00,0x00},
    /* 0x3B ';' */ {0x00,0x00,0x00,0x00,0x00,0x0C,0x0C,0x00,0x00,0x00,0x00,0x0C,0x0C,0x08,0x04,0x00},
    /* 0x3C '<' */ {0x00,0x00,0x20,0x10,0x08,0x04,0x02,0x01,0x02,0x04,0x08,0x10,0x20,0x00,0x00,0x00},
    /* 0x3D '=' */ {0x00,0x00,0x00,0x00,0x00,0x3E,0x00,0x00,0x00,0x3E,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x3E '>' */ {0x00,0x00,0x01,0x02,0x04,0x08,0x10,0x20,0x10,0x08,0x04,0x02,0x01,0x00,0x00,0x00},
    /* 0x3F '?' */ {0x00,0x0C,0x12,0x21,0x21,0x20,0x10,0x08,0x04,0x04,0x00,0x00,0x0C,0x0C,0x00,0x00},
    /* 0x40 '@' */ {0x00,0x1C,0x22,0x41,0x59,0x55,0x55,0x55,0x55,0x55,0x39,0x01,0x42,0x3C,0x00,0x00},
    /* 0x41 'A' */ {0x00,0x08,0x08,0x14,0x14,0x14,0x14,0x22,0x22,0x22,0x3E,0x41,0x41,0x41,0x00,0x00},
    /* 0x42 'B' */ {0x00,0x1F,0x21,0x41,0x41,0x41,0x21,0x1F,0x21,0x41,0x41,0x41,0x21,0x1F,0x00,0x00},
    /* 0x43 'C' */ {0x00,0x1C,0x22,0x41,0x41,0x01,0x01,0x01,0x01,0x01,0x41,0x41,0x22,0x1C,0x00,0x00},
    /* 0x44 'D' */ {0x00,0x1F,0x21,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x21,0x1F,0x00,0x00},
    /* 0x45 'E' */ {0x00,0x7F,0x01,0x01,0x01,0x01,0x01,0x3F,0x01,0x01,0x01,0x01,0x01,0x7F,0x00,0x00},
    /* 0x46 'F' */ {0x00,0x7F,0x01,0x01,0x01,0x01,0x01,0x3F,0x01,0x01,0x01,0x01,0x01,0x01,0x00,0x00},
    /* 0x47 'G' */ {0x00,0x1C,0x22,0x41,0x41,0x01,0x01,0x01,0x71,0x41,0x41,0x41,0x62,0x5C,0x00,0x00},
    /* 0x48 'H' */ {0x00,0x41,0x41,0x41,0x41,0x41,0x41,0x7F,0x41,0x41,0x41,0x41,0x41,0x41,0x00,0x00},
    /* 0x49 'I' */ {0x00,0x1C,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x1C,0x00,0x00},
    /* 0x4A 'J' */ {0x00,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x21,0x21,0x12,0x0C,0x00,0x00},
    /* 0x4B 'K' */ {0x00,0x41,0x21,0x21,0x11,0x09,0x09,0x05,0x0B,0x11,0x11,0x21,0x41,0x41,0x00,0x00},
    /* 0x4C 'L' */ {0x00,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x7F,0x00,0x00},
    /* 0x4D 'M' */ {0x00,0x41,0x41,0x63,0x63,0x63,0x63,0x55,0x55,0x55,0x55,0x49,0x49,0x49,0x00,0x00},
    /* 0x4E 'N' */ {0x00,0x41,0x41,0x43,0x43,0x45,0x45,0x49,0x49,0x51,0x51,0x61,0x61,0x41,0x00,0x00},
    /* 0x4F 'O' */ {0x00,0x1C,0x22,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x22,0x1C,0x00,0x00},
    /* 0x50 'P' */ {0x00,0x1F,0x21,0x41,0x41,0x41,0x21,0x1F,0x01,0x01,0x01,0x01,0x01,0x01,0x00,0x00},
    /* 0x51 'Q' */ {0x00,0x1C,0x22,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x49,0x51,0x22,0x5C,0x00,0x00},
    /* 0x52 'R' */ {0x00,0x1F,0x21,0x41,0x41,0x41,0x21,0x1F,0x11,0x11,0x21,0x21,0x41,0x41,0x00,0x00},
    /* 0x53 'S' */ {0x00,0x1C,0x22,0x41,0x41,0x01,0x06,0x18,0x20,0x40,0x41,0x41,0x22,0x1C,0x00,0x00},
    /* 0x54 'T' */ {0x00,0x7F,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x00,0x00},
    /* 0x55 'U' */ {0x00,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x41,0x22,0x1C,0x00,0x00},
    /* 0x56 'V' */ {0x00,0x41,0x41,0x41,0x22,0x22,0x22,0x22,0x14,0x14,0x14,0x08,0x08,0x08,0x00,0x00},
    /* 0x57 'W' */ {0x00,0x49,0x49,0x49,0x49,0x55,0x55,0x55,0x55,0x22,0x22,0x22,0x22,0x22,0x00,0x00},
    /* 0x58 'X' */ {0x00,0x41,0x41,0x22,0x22,0x14,0x14,0x08,0x14,0x14,0x22,0x22,0x41,0x41,0x00,0x00},
    /* 0x59 'Y' */ {0x00,0x41,0x41,0x22,0x22,0x14,0x14,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x00,0x00},
    /* 0x5A 'Z' */ {0x00,0x7F,0x40,0x20,0x20,0x10,0x10,0x08,0x04,0x04,0x02,0x02,0x01,0x7F,0x00,0x00},
    /* 0x5B '[' */ {0x3E,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x3E,0x00},
    /* 0x5C '\' */ {0x00,0x41,0x41,0x22,0x22,0x14,0x14,0x3E,0x08,0x08,0x3E,0x08,0x08,0x08,0x00,0x00},
    /* 0x5D ']' */ {0x3E,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x3E,0x00},
    /* 0x5E '^' */ {0x08,0x14,0x22,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x5F '_' */ {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF},
    /* 0x60 '`' */ {0x04,0x08,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
    /* 0x61 'a' */ {0x00,0x00,0x00,0x00,0x00,0x00,0x1E,0x21,0x20,0x3C,0x22,0x21,0x31,0x6E,0x00,0x00},
    /* 0x62 'b' */ {0x00,0x01,0x01,0x01,0x01,0x01,0x1D,0x23,0x41,0x41,0x41,0x41,0x23,0x1D,0x00,0x00},
    /* 0x63 'c' */ {0x00,0x00,0x00,0x00,0x00,0x00,0x3C,0x42,0x01,0x01,0x01,0x01,0x42,0x3C,0x00,0x00},
    /* 0x64 'd' */ {0x00,0x40,0x40,0x40,0x40,0x40,0x5C,0x62,0x41,0x41,0x41,0x41,0x62,0x5C,0x00,0x00},
    /* 0x65 'e' */ {0x00,0x00,0x00,0x00,0x00,0x00,0x1C,0x22,0x41,0x7F,0x01,0x01,0x42,0x3C,0x00,0x00},
    /* 0x66 'f' */ {0x00,0x18,0x04,0x04,0x04,0x04,0x1F,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x00,0x00},
    /* 0x67 'g' */ {0x00,0x00,0x00,0x00,0x00,0x00,0x5C,0x22,0x22,0x1C,0x02,0x3E,0x41,0x41,0x3E,0x00},
    /* 0x68 'h' */ {0x00,0x01,0x01,0x01,0x01,0x01,0x1D,0x23,0x41,0x41,0x41,0x41,0x41,0x41,0x00,0x00},
    /* 0x69 'i' */ {0x00,0x00,0x08,0x08,0x00,0x00,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x00,0x00},
    /* 0x6A 'j' */ {0x00,0x00,0x08,0x08,0x00,0x00,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x06,0x00},
    /* 0x6B 'k' */ {0x00,0x01,0x01,0x01,0x01,0x01,0x21,0x11,0x09,0x05,0x0B,0x11,0x21,0x41,0x00,0x00},
    /* 0x6C 'l' */ {0x00,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x00,0x00},
    /* 0x6D 'm' */ {0x00,0x00,0x00,0x00,0x00,0x00,0x35,0x4B,0x49,0x49,0x49,0x49,0x49,0x49,0x00,0x00},
    /* 0x6E 'n' */ {0x00,0x00,0x00,0x00,0x00,0x00,0x1D,0x23,0x41,0x41,0x41,0x41,0x41,0x41,0x00,0x00},
    /* 0x6F 'o' */ {0x00,0x00,0x00,0x00,0x00,0x00,0x1C,0x22,0x41,0x41,0x41,0x41,0x22,0x1C,0x00,0x00},
    /* 0x70 'p' */ {0x00,0x00,0x00,0x00,0x00,0x00,0x1D,0x23,0x41,0x41,0x41,0x23,0x1D,0x01,0x01,0x00},
    /* 0x71 'q' */ {0x00,0x00,0x00,0x00,0x00,0x00,0x5C,0x62,0x41,0x41,0x41,0x62,0x5C,0x40,0x40,0x00},
    /* 0x72 'r' */ {0x00,0x00,0x00,0x00,0x00,0x00,0x74,0x0C,0x04,0x04,0x04,0x04,0x04,0x04,0x00,0x00},
    /* 0x73 's' */ {0x00,0x00,0x00,0x00,0x00,0x00,0x3E,0x41,0x01,0x06,0x38,0x40,0x41,0x3E,0x00,0x00},
    /* 0x74 't' */ {0x00,0x00,0x04,0x04,0x04,0x04,0x1F,0x04,0x04,0x04,0x04,0x04,0x04,0x18,0x00,0x00},
    /* 0x75 'u' */ {0x00,0x00,0x00,0x00,0x00,0x00,0x41,0x41,0x41,0x41,0x41,0x41,0x62,0x5C,0x00,0x00},
    /* 0x76 'v' */ {0x00,0x00,0x00,0x00,0x00,0x00,0x41,0x41,0x22,0x22,0x14,0x14,0x08,0x08,0x00,0x00},
    /* 0x77 'w' */ {0x00,0x00,0x00,0x00,0x00,0x00,0x49,0x49,0x49,0x55,0x55,0x22,0x22,0x22,0x00,0x00},
    /* 0x78 'x' */ {0x00,0x00,0x00,0x00,0x00,0x00,0x41,0x22,0x14,0x08,0x08,0x14,0x22,0x41,0x00,0x00},
    /* 0x79 'y' */ {0x00,0x00,0x00,0x00,0x00,0x00,0x41,0x41,0x22,0x22,0x14,0x14,0x08,0x04,0x03,0x00},
    /* 0x7A 'z' */ {0x00,0x00,0x00,0x00,0x00,0x00,0x7F,0x20,0x10,0x08,0x04,0x02,0x01,0x7F,0x00,0x00},
    /* 0x7B '{' */ {0x38,0x08,0x08,0x08,0x08,0x08,0x08,0x04,0x08,0x08,0x08,0x08,0x08,0x08,0x38,0x00},
    /* 0x7C '|' */ {0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08},
    /* 0x7D '}' */ {0x0E,0x08,0x08,0x08,0x08,0x08,0x08,0x10,0x08,0x08,0x08,0x08,0x08,0x08,0x0E,0x00},
    /* 0x7E '~' */ {0x26,0x19,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
};

// 直接向显存写入一个 ASCII 字符
void put_char(char c, uint32_t x, uint32_t y, uint32_t color) {
    if (!g_framebuffer || !g_framebuffer->framebuffer_addr) return;

    // 基础边界检查
    if (x + FONT_W > g_framebuffer->framebuffer_width || 
        y + FONT_H > g_framebuffer->framebuffer_height) return;

    if (c < 32 || c > 126) c = '?';

    const uint8_t *glyph = font16x8_basic[(uint8_t)c - 32];
    uint32_t *fb = (uint32_t*)g_framebuffer->framebuffer_addr;
    uint32_t pitch_pixels = g_framebuffer->framebuffer_pitch >> 2;

    for (uint32_t _y = 0; _y < FONT_H; _y++) {
        uint8_t bits = glyph[_y];
        uint32_t row_idx = (y + _y) * pitch_pixels + x;
        
        for (uint32_t _x = 0; _x < FONT_W; _x++) {
            if (bits & (0x01 << _x)) { 
                fb[row_idx + _x] = color;
            }
        }
    }
}

// 内部辅助函数：查找 Unicode 对应的中文字形
const chinese_glyph_t* find_chinese_glyph(uint16_t unicode) {
    size_t size = sizeof(chinese_font_basic) / sizeof(chinese_glyph_t);
    for (size_t i = 0; i < size; i++) {
        if (chinese_font_basic[i].unicode == unicode) {
            return &chinese_font_basic[i];
        }
    }
    return NULL;
}

// 内部辅助函数：直接向显存写入一个中文字符 (16x16)
void put_chinese_char(uint16_t unicode, uint32_t x, uint32_t y, uint32_t color) {
    if (!g_framebuffer || !g_framebuffer->framebuffer_addr) return;

    if (x + CHINESE_FONT_W > g_framebuffer->framebuffer_width || 
        y + CHINESE_FONT_H > g_framebuffer->framebuffer_height) return;

    const chinese_glyph_t* glyph = find_chinese_glyph(unicode);
    
    // 如果找不到，画一个空心方框
    if (!glyph) {
        for (uint32_t i = 0; i < CHINESE_FONT_W; i++) {
            put_pixel(x + i, y, color);
            put_pixel(x + i, y + CHINESE_FONT_H - 1, color);
        }
        for (uint32_t i = 0; i < CHINESE_FONT_H; i++) {
            put_pixel(x, y + i, color);
            put_pixel(x + CHINESE_FONT_W - 1, y + i, color);
        }
        return;
    }

    uint32_t *fb = (uint32_t*)g_framebuffer->framebuffer_addr;
    uint32_t pitch_pixels = g_framebuffer->framebuffer_pitch >> 2;

    for (uint32_t _y = 0; _y < CHINESE_FONT_H; _y++) {
        uint32_t row_idx = (y + _y) * pitch_pixels + x;
        
        // 中文位图通常是每行两个字节
        uint8_t b1 = glyph->bitmap[_y * 2];
        uint8_t b2 = glyph->bitmap[_y * 2 + 1];

        // 处理前 8 位
        for (uint32_t _x = 0; _x < 8; _x++) {
            if (b1 & (0x80 >> _x)) fb[row_idx + _x] = color;
        }
        // 处理后 8 位
        for (uint32_t _x = 0; _x < 8; _x++) {
            if (b2 & (0x80 >> _x)) fb[row_idx + 8 + _x] = color;
        }
    }
}

// UTF-8 解码 Unicode
static uint16_t utf8_to_unicode(const char *utf8, uint32_t *advance) {
    uint8_t c = (uint8_t)utf8[0];
    if (c < 0x80) {
        *advance = 1;
        return (uint16_t)c;
    } else if ((c & 0xE0) == 0xC0) {
        *advance = 2;
        return (uint16_t)(((c & 0x1F) << 6) | (utf8[1] & 0x3F));
    } else if ((c & 0xF0) == 0xE0) {
        *advance = 3;
        return (uint16_t)(((c & 0x0F) << 12) | ((utf8[1] & 0x3F) << 6) | (utf8[2] & 0x3F));
    }
    *advance = 1; // 无效序列跳过 1 字节
    return 0x3F; // 返回 '?'
}

// 打印 UTF-8 编码的混合字符串
void print_string(const char *str, uint32_t x, uint32_t y, uint32_t color) {
    if (!str) return;
    
    uint32_t cur_x = x;
    uint32_t cur_y = y;

    while (*str) {
        uint32_t advance;
        uint16_t uni = utf8_to_unicode(str, &advance);

        if (uni < 128) {
            put_char((char)uni, cur_x, cur_y, color);
            cur_x += FONT_W;
        } else {
            put_chinese_char(uni, cur_x, cur_y, color);
            cur_x += CHINESE_FONT_W;
        }
        
        // 自动换行
        if (g_framebuffer && cur_x + CHINESE_FONT_W > g_framebuffer->framebuffer_width) {
            cur_x = x;
            cur_y += CHINESE_FONT_H + 2;
        }

        str += advance;
    }
}
